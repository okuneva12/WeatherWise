#!/bin/bash

# –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–±–æ—Ä–∫–∏ Debug APK (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π –≤ –ø—É—Ç—è—Ö)

echo "=== WeatherWise - –ü—Ä–æ—Å—Ç–∞—è —Å–±–æ—Ä–∫–∞ APK ==="
echo ""

cd /c/Users/–í–∏–∫—Ç–æ—Ä–∏—è/weatherwise_app || exit

# –û—á–∏—Å—Ç–∫–∞
echo "–û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞..."
flutter clean

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
echo ""
echo "–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
flutter pub get

# –°–±–æ—Ä–∫–∞ Debug APK
echo ""
echo "–°–±–æ—Ä–∫–∞ Debug APK (—ç—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç)..."
flutter build apk --debug

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
if [ -f "build/app/outputs/flutter-apk/app-debug.apk" ]; then
    APK_SIZE=$(du -h build/app/outputs/flutter-apk/app-debug.apk | cut -f1)
    echo ""
    echo "‚úÖ APK —Å–æ–±—Ä–∞–Ω —É—Å–ø–µ—à–Ω–æ!"
    echo ""
    echo "üì¶ –§–∞–π–ª: build/app/outputs/flutter-apk/app-debug.apk"
    echo "üìè –†–∞–∑–º–µ—Ä: $APK_SIZE"
    echo ""
    echo "üì± –î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:"
    echo "   1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ APK —Ñ–∞–π–ª –Ω–∞ Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"
    echo "   2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ"
    echo "   3. –†–∞–∑—Ä–µ—à–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏–∑ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è)"
    echo "   4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
else
    echo ""
    echo "‚ùå –û—à–∏–±–∫–∞: APK –Ω–µ –Ω–∞–π–¥–µ–Ω"
    echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏ –≤—ã—à–µ"
    exit 1
fi

echo ""
echo "=== –ì–æ—Ç–æ–≤–æ ==="


